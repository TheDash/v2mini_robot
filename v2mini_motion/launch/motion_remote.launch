<!-- Start V2Mini and a Controller (locally) -->

<launch>

  <arg name="v2mini_ip" /> <!-- TODO CHANGE TO HOSTNAME -->
  <arg name="control" default="remote" /> <!-- 'autonomous' or 'remote' -->
  <arg name="controller" default="keyboard" /> <!-- 'gamepad' or 'keyboard' -->
  <arg name="use_mega" default="true" />
  <arg name="use_uno" default="true" />

  <machine name="v2-mini" address="$(arg v2mini_ip)" user="v2-mini" timeout="15.0"/>

    <!-- Launch the MCU nodes -->
    <!-- launch arduino mega node (robot base) -->
    <group if="$(arg use_mega)" ns="mega_base">
        <node machine="v2-mini" name="megaware" pkg="rosserial_python" type="serial_node.py" respawn="true" >
            <param name="port" value="/dev/arduino_mega" />
        </node>
    </group>

        <!-- launch arduino uno node (robot torso) -->
    <group if="$(arg use_uno)" ns="uno_torso">
      <node machine="v2-mini" name="unoware" pkg="rosserial_python" type="serial_node.py" respawn="true" >
          <param name="port" value="/dev/arduino_uno" />
      </node>
    </group>

  <!-- Launch the controller node -->
  <node name="controller" pkg="v2mini_motion" type="motion_control" respawn="false" >
      <param name="control" value="$(arg control)" />
      <param name="controller" value="$(arg controller)" />
  </node>

</launch>

<!--

example:

roslaunch v2mini_motion motion_direct.launch use_mega:=false use_uno:=true controller:=gamepad

-->
